# Manage ONLY GRAFANA resources as part of this kustomize deployment
# and disable all other resources related to Prometheus and metrics
# as those other resources to be deployed in all clusters as part of cluster addon argocd applicationset
kind: Kustomization

helmCharts:
  - name: kube-prometheus-stack
    repo: https://prometheus-community.github.io/helm-charts
    version: 33.1.0
    releaseName: grafana
    valuesFile: values.yaml
    includeCRDs: true
    namespace: prometheus-operator

patchesStrategicMerge:
  # to force argocd to replace(create/recreate) instead appling this crd as a workaround for it's name too long issue
  - "./overlays/crd-prometheuses.monitoring.coreos.com.yaml"